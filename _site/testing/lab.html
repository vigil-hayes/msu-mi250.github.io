<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Lab - MI 250</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Lab | MI 250</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Lab" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful." /> <meta property="og:description" content="Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful." /> <link rel="canonical" href="http://localhost:4000/testing/lab.html" /> <meta property="og:url" content="http://localhost:4000/testing/lab.html" /> <meta property="og:site_name" content="MI 250" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Lab" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful.","headline":"Lab","url":"http://localhost:4000/testing/lab.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> MI 250 </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/syllabus.html" class="nav-list-link">Syllabus</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Schedule category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/schedule.html" class="nav-list-link">Schedule</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 1 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/1.html" class="nav-list-link">Week 1</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/first_week.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/installing_python.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/intro_to_class.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 2 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/2.html" class="nav-list-link">Week 2</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/variables.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/control_flow.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/mlk.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 3 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/3.html" class="nav-list-link">Week 3</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/version_control.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/git_and_gitlab.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/choose_your_own_adventure.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 4 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/4.html" class="nav-list-link">Week 4</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/loops.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/counting_and_loops.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/flashcards.html" class="nav-list-link">Studio</a> </li><li class="nav-list-item "> <a href="/homework/hw1_google.html" class="nav-list-link">Homework</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 5 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/5.html" class="nav-list-link">Week 5</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/drawing.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/turtle.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/flag.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 6 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/6.html" class="nav-list-link">Week 6</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/lists_and_randomness.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/lists.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/guestbook.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 7 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/7.html" class="nav-list-link">Week 7</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/functions.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/drawing_with_functions.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/speak_in_emoji.html" class="nav-list-link">Studio</a> </li><li class="nav-list-item "> <a href="/homework/hw2_errors.html" class="nav-list-link">Homework</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Spring Break category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/springbreak.html" class="nav-list-link">Spring Break</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/springbreak.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/springbreak.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/springbreak.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 8 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/8.html" class="nav-list-link">Week 8</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/dictionaries.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/dictionaries_as_data_structures.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/structured_UI.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 9 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/9.html" class="nav-list-link">Week 9</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/modules.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/organizing_your_program.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/hangman.html" class="nav-list-link">Studio</a> </li><li class="nav-list-item "> <a href="/homework/hw3_jobs.html" class="nav-list-link">Homework</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 10 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/10.html" class="nav-list-link">Week 10</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/revisiting_functions.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/practicing_functions.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/tic_tac_toe.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 11 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/11.html" class="nav-list-link">Week 11</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/reading_code.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/practice_reading.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/homework/hw4_chatgpt.html" class="nav-list-link">Homework</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 12 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/12.html" class="nav-list-link">Week 12</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/files.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 13 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/13.html" class="nav-list-link">Week 13</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/apis.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Final Week category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/final.html" class="nav-list-link">Final Week</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/final.html" class="nav-list-link">Readings</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Reference category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/reference.html" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/reference/turning_in_work.html" class="nav-list-link">Turning in work</a></li><li class="nav-list-item "><a href="/reference/screenshots.html" class="nav-list-link">Taking screenshots</a></li><li class="nav-list-item "><a href="/reference/command_line.html" class="nav-list-link">Using command line</a></li><li class="nav-list-item "><a href="/reference/using_git.html" class="nav-list-link">Using Git</a></li><li class="nav-list-item "><a href="/reference/error_messages.html" class="nav-list-link">Error messages</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MI 250" aria-label="Search MI 250" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1> Lab: Testing </h1> <p><b>Git Repository:</b> <a href="https://gitlab.msu.edu/mi-250/testing" target="_blank"><tt>https://gitlab.msu.edu/mi-250/testing </tt></a> </p> <!--<p><b>Zoom Link:</b> <a href="https://msu.zoom.us/j/96651450582?pwd=SVhqOTNOMzJERW5BSVVmaEhFeWd2QT09"><tt>https://msu.zoom.us/j/96651450582?pwd=SVhqOTNOMzJERW5BSVVmaEhFeWd2QT09</tt></a>--> <h2 id="install-pytest"> <a href="#install-pytest" class="anchor-heading" aria-labelledby="install-pytest"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install PyTest </h2> <p>Today, we will be writing automated software tests. Python comes built-in with a testing framework called <a href="https://docs.python.org/3.7/library/unittest.html">unittest</a>, but we aren’t going to use that. We are going to use a much better and easier to use system called <a href="https://docs.pytest.org/en/latest/">PyTest</a>.</p> <p>Before we can use it, we first need to install it. This only needs to be done once. On the command line, run the command</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install pytest
</code></pre></div></div> <p>It should download and install the latest version of pytest. Once it is finished, you should get your prompt back at the command line. Next, let’s check and make sure it is installed and working correctly. The <a href="fib.py">fib.py</a> program from the readings is in the git repository for this week. Run this command; it should run the tests and report 4 passes and 4 failures:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest fib.py
</code></pre></div></div> <p>Note: You’ll need to make sure that fib.py is in the current directory</p> <p>If it runs the tests (which may take a few seconds), and then prints out that there are 4 passes and 4 failures, then it is working.</p> <p>You can also run <code class="language-plaintext highlighter-rouge">pytest fib_improved.py</code> to see all of the tests pass.</p> <h2 id="basic-testing"> <a href="#basic-testing" class="anchor-heading" aria-labelledby="basic-testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Testing </h2> <p>We are going to practice writing test cases for existing code. I am going to give you pre-written functions, and you will need to write one or more test cases – usually automated test cases – for those.</p> <h3 id="exercise-1-basic-level-0-test-for-cleanup"> <a href="#exercise-1-basic-level-0-test-for-cleanup" class="anchor-heading" aria-labelledby="exercise-1-basic-level-0-test-for-cleanup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 1: Basic (Level 0) Test for Cleanup </h3> <p>Let’s start by looking at the file <code class="language-plaintext highlighter-rouge">cleanup.py</code>. It contains a function – <code class="language-plaintext highlighter-rouge">cleanup()</code> – that takes a string and tries to clean up the langauge by replacing bad words with less bad words.</p> <p>Let’s begin by writing a basic test for this. There is a test function in the file – <code class="language-plaintext highlighter-rouge">test_cleanup()</code> – that right now does nothing. Let’s write a test case. In the test, call the <code class="language-plaintext highlighter-rouge">cleanup()</code> function, and give it the message “damn this shit to hell” – which of course has a lot of bad words in it. Save the output from the <code class="language-plaintext highlighter-rouge">cleanup()</code> function into a variable. Then use <code class="language-plaintext highlighter-rouge">assert</code> to check to see if that output has had the bad words replaced – it should now say “darn this poop to hades”.</p> <p>Once you get the test written, run <code class="language-plaintext highlighter-rouge">pytest cleanup.py</code> and see if it passes. You should make sure that your test passes correctly before moving on.</p> <h3 id="exercise-2-basic-level-0-test-for-first-word"> <a href="#exercise-2-basic-level-0-test-for-first-word" class="anchor-heading" aria-labelledby="exercise-2-basic-level-0-test-for-first-word"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 2: Basic (Level 0) Test for First Word </h3> <p>If you look at the file <code class="language-plaintext highlighter-rouge">first_word.py</code>, it contains a function called <code class="language-plaintext highlighter-rouge">first_word()</code>. This function takes a sentence as a string, and it returns the very first word in the sentence. Let’s write a test for this, to see if it works correctly.</p> <p>The file contains a single test called <code class="language-plaintext highlighter-rouge">test_first_word()</code>. Right now that function does nothing, so the test passes. Edit that function to test the <code class="language-plaintext highlighter-rouge">first_word()</code> function. Call the function, passing in the sentence “This is a test”. Save what the function returns to a variable. Then check that what the function returns is correct – it is the word “This”.</p> <p>Run your test. It should fail, because the <code class="language-plaintext highlighter-rouge">first_word()</code> function is broken.</p> <h3 id="exercise-3-fix-the-bug-in-first_word"> <a href="#exercise-3-fix-the-bug-in-first_word" class="anchor-heading" aria-labelledby="exercise-3-fix-the-bug-in-first_word"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 3: Fix the bug in first_word </h3> <p>It is returning the wrong word! Fix the function so that your test now passes. Run <code class="language-plaintext highlighter-rouge">pytest</code> and verify that your test now passes correctly.</p> <h2 id="a-few-more-tests"> <a href="#a-few-more-tests" class="anchor-heading" aria-labelledby="a-few-more-tests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A Few More Tests </h2> <h3 id="exercise-4-testing-how-to-count-letters--hi"> <a href="#exercise-4-testing-how-to-count-letters--hi" class="anchor-heading" aria-labelledby="exercise-4-testing-how-to-count-letters--hi"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 4: Testing how to count letters – “HI” </h3> <p>Next, turn your attention to the <code class="language-plaintext highlighter-rouge">count_letters.py</code> file. This file counts a <code class="language-plaintext highlighter-rouge">count_letters()</code> function that takes a message and counts how many times each letter appears, and returns the dictionary with the letter counts.</p> <p>Write a test for this function that passes in the word “HI” and verifies that the function reports that the word has one “H” and one “I”. You will have to write our own test function for this.</p> <p><em>Note</em>: You are allowed to have more than one <code class="language-plaintext highlighter-rouge">assert</code> in a single test. All asserts must pass for the test to pass. So you can separately check the counts for ‘H’ and ‘I’ are correct.</p> <h3 id="exercise-5-test-repeats-level-1-test"> <a href="#exercise-5-test-repeats-level-1-test" class="anchor-heading" aria-labelledby="exercise-5-test-repeats-level-1-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 5: Test repeats (Level 1 test) </h3> <p>Add a second test to this file that tests repeated letters. Pass in a string that has at least one letter repeated more than once. Then verify that this correctly counts the number of times that letter appears.</p> <h3 id="exercise-6-test-empty-level-1-test"> <a href="#exercise-6-test-empty-level-1-test" class="anchor-heading" aria-labelledby="exercise-6-test-empty-level-1-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 6: Test empty (Level 1 test) </h3> <p>What happens if you pass in the empty string – <code class="language-plaintext highlighter-rouge">""</code>? Add a test case that passes the empty string to <code class="language-plaintext highlighter-rouge">count_letters()</code> and verifies that it returns a reasonable answer.</p> <h3 id="exercise-7-test-missing-level-2-test"> <a href="#exercise-7-test-missing-level-2-test" class="anchor-heading" aria-labelledby="exercise-7-test-missing-level-2-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 7: Test missing (Level 2 test) </h3> <p>Add one more test case to <code class="language-plaintext highlighter-rouge">count_letters.py</code>. Pass in a word to <code class="language-plaintext highlighter-rouge">count_letters()</code>. Verify that it correctly counts at least one of the letters. But also pick a letter that is NOT in that word, and verify that that that letter is NOT reported in the dictionary that is returned.</p> <p>By this point, you should have 4 separate tests in <code class="language-plaintext highlighter-rouge">count_letters.py</code> that all pass when you run it with <code class="language-plaintext highlighter-rouge">pytest</code>.</p> <p><em>Hint</em>: You can do <code class="language-plaintext highlighter-rouge">assert key in dict</code> or <code class="language-plaintext highlighter-rouge">assert key not in dict</code> – in general, anything you would use in an <code class="language-plaintext highlighter-rouge">if</code> statement, you can also do in an <code class="language-plaintext highlighter-rouge">assert</code>.</p> <h2 id="testing-output"> <a href="#testing-output" class="anchor-heading" aria-labelledby="testing-output"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing Output </h2> <p>Much of the code we’ve written so far in class has been creating output – for example, the <code class="language-plaintext highlighter-rouge">print()</code> statements for our choose-your-own adventure program or our conversational agent program. We can test this code by “capturing” the output from the print statements into variables, and then checking whether that output is what we expect it to be.</p> <p>To capture output, we use the <code class="language-plaintext highlighter-rouge">capsys</code> functionality of pytest. We add a parameter to our test called <code class="language-plaintext highlighter-rouge">capsys</code>, which will cause pytest to capture all print statements. Then we can retrieve that output by saying <code class="language-plaintext highlighter-rouge">captured = capsys.readouterr()</code>. THen we can access the actual output with <code class="language-plaintext highlighter-rouge">captured.out</code>. He is an example test that just prints the word hello, and verifies tht it prints correctly:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_print(capsys):
	print("hello")
	captured = capsys.readouterr()
	assert capured.out == "hello"
</code></pre></div></div> <h3 id="exercise-8-99-bottles"> <a href="#exercise-8-99-bottles" class="anchor-heading" aria-labelledby="exercise-8-99-bottles"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 8: 99 bottles </h3> <p>If you look in the file <code class="language-plaintext highlighter-rouge">bottles.py</code> you’ll see a function that prints out one verse of the song <a href="https://en.wikipedia.org/wiki/99_Bottles_of_Beer">99 bottles</a>.</p> <p>Write a function that tests this by picking a verse number (e.g. verse 75), calling the bottles function, capturing the output, and the verifying that the output looks like what it is supposed to look like.</p> <h3 id="exercise-9-9-bottles"> <a href="#exercise-9-9-bottles" class="anchor-heading" aria-labelledby="exercise-9-9-bottles"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 9: 9 bottles </h3> <p>The bottles function does something different for verses less than 10. Write another test to verify that a verse less than 10 (e.g. 9) prints out the alternate version of the song.</p> <h2 id="testing-input"> <a href="#testing-input" class="anchor-heading" aria-labelledby="testing-input"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing Input </h2> <p>We also write a lot of code that gets inputs from users. How do you test that?</p> <p>The easiest way to test that is to replace the <code class="language-plaintext highlighter-rouge">input()</code> function with another function that returns a pre-specified string. This way, when your program calls <code class="language-plaintext highlighter-rouge">input()</code>, it won’t actually ask the user; instead, it will just pretend the user typed something in and return what you tell it to. This is called <em>mocking</em> the input.</p> <p>To do that, we use a feature in pytest called monkeypatch. Put one line at the beginning of your test to replace input with whatever you want it to be:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_input(monkeypatch):
	monkeypatch.setattr('builtins.input', lambda x: "Rick Wash")
	name = input("What is your name? ")
	assert name == "Rick Wash"
</code></pre></div></div> <h3 id="exercise-10-test-the-flashcard"> <a href="#exercise-10-test-the-flashcard" class="anchor-heading" aria-labelledby="exercise-10-test-the-flashcard"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 10: Test the Flashcard </h3> <p>The file <code class="language-plaintext highlighter-rouge">flashcard.py</code> has a function that contains a single flashcard, much like the flashcards you made in week 2 studio. It asks the user a riddle, waits for the user to respond, and then returns either the word “Correct” or “Incorrect” based on what the user entered.</p> <p>Test that this flashcard works correctly. If the user enters “mountain” (the correct answer), then the function should return “Correct”. If the user enters anythign else, it should return “Incorrect”.</p> <p>You will need at least two tests to test this – one that tests a correct answer, and one that tests an incorrect answer.</p> <h2 id="testing-your-own-code"> <a href="#testing-your-own-code" class="anchor-heading" aria-labelledby="testing-your-own-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing Your Own Code </h2> <p>It is easier to write tests once you have a program working. But which comes first, the test or the program? If you google this question, you’ll get <strong>thousands</strong> of very long, heated discussions online. This is a subject of much debate among programmers.</p> <p>Still, this is something you will need to deal with. So for this next exercise, you will need to write BOTH the main function code, and the test code.</p> <h3 id="exercise-11-nth-word"> <a href="#exercise-11-nth-word" class="anchor-heading" aria-labelledby="exercise-11-nth-word"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 11: Nth word </h3> <p>Write a function that extracts the nth word from a sentence. That is, if I give you the sentence “this is a sentence” and ask for the 4th word, it should return “sentence”. If I ask for the 2nd word, it should return “is”. Look at the code in <code class="language-plaintext highlighter-rouge">first_word.py</code> as a good place to start.</p> <p>Also, then write one or more tests for your nth word function to verify that it works correctly.</p> <p>It is up to you whether you write the test first, write the main code first, or do them both at the same time. Think about which way makes most sense to you. Do you write the code first, and then test it to make sure it works? OR, do you write the test first, so you know what it needs to do, and then write the code so that it matches what the test says it should do?</p> <p><em>Hint</em>: Start by making a list of what kinds of things you can test. Then write your “nth word” function to be easy to test in that way. Focus on Level 0 and Level 1 tests. Try to find ways that the function is supposed to work correctly, and test that it does.</p> <h2 id="manual-test-cases-for-turtle-graphics"> <a href="#manual-test-cases-for-turtle-graphics" class="anchor-heading" aria-labelledby="manual-test-cases-for-turtle-graphics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Manual Test Cases for Turtle Graphics </h2> <p>We’ve now written a lot of automated tests, spread across a bunch of different files. Run the command</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest bottles.py cleanup.py count_letters.py fib_improved.py first_word.py flashcard.py
</code></pre></div></div> <p>It will go through all of the files that have tests in them, and then run ALL of the tests you’ve written. Very hand way to check all of your code.</p> <p>However, there’s one thing we’ve done a lot of in this class that we haven’t written tests for: turtle graphics. It is actually pretty hard to write tests for turtle graphics, because the output is on the screen.</p> <p>Instead, we usually do manual tests for turtle graphics programs. So far, you’ve just run the program over and over and see if you like what is looks like. Let’s be more rigorous than that. Let’s create some very specific manual tests where the program draws something, and then we explicitly write down what we expect it to draw. That way, someone can look at the expected output and decide, for each drawing, whether it “passes” or “fails”.</p> <h3 id="challenge-stars"> <a href="#challenge-stars" class="anchor-heading" aria-labelledby="challenge-stars"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge: Stars </h3> <p>In your folder for this week, there is a <code class="language-plaintext highlighter-rouge">star.py</code> program. That program contains a function that draws a star of different sizes and colors.</p> <p>Create 3 manual tests for this star function. One test should be a Level 0 test – give it a reasonable size and color, and see if it works. The other two tests should be Level 1 tests – give it a different size, and a different color, and see if it draws the star appropriately.</p> <p>For each test case, explicilty write down what parameters to give the function, and what you <em>expect</em> the program to draw. They should be paired – so these parameters should draw this output. It is OK to write this on a piece of paper – just take a photo of it with your phone to turn it in.</p> <p>Then modify the program to draw the 3 test cases on the screen. Then run your test manually – look at the output, and decide for yourself whether what it drew matches what you expected it to draw. Write down whether each test cases passes or fails.</p> <h3 id="challenge-level-2-tests-for-nth_word"> <a href="#challenge-level-2-tests-for-nth_word" class="anchor-heading" aria-labelledby="challenge-level-2-tests-for-nth_word"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge: Level 2 tests for nth_word </h3> <p>As a second challenge, try to write one or more tests for your <code class="language-plaintext highlighter-rouge">nth_word()</code> function that tests errors – aka Level 2 tests. Think about inputs to your <code class="language-plaintext highlighter-rouge">nth_word()</code> function that might be invalid. What happens if someone asks for the 5th word in a sentence that only has 4 words? What happens if someone asks for the ‘a’th word instead of the ‘1’st word?<br /> What happens if someone asks for the ‘-1’st word? (is that actually an error?)</p> <p>In each of those cases, think about what you think <em>should</em> happen, and then write the test to test whether that actually happens or not. If it doesn’t happen, it could be because the function is broken. Or it could be because your understanding is incorrect, and the test is helping you to see what is wrong.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
