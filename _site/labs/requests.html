<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Lab - MI 250</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Lab | MI 250</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Lab" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful." /> <meta property="og:description" content="Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful." /> <link rel="canonical" href="http://localhost:4000/labs/requests.html" /> <meta property="og:url" content="http://localhost:4000/labs/requests.html" /> <meta property="og:site_name" content="MI 250" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Lab" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Introduction to Applied Programming: A course for non-programmers to introduce them to basic concepts of programming that are useful in careers where most of the time is not spent programming, but some technical knowledge is useful.","headline":"Lab","url":"http://localhost:4000/labs/requests.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> MI 250 </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/syllabus.html" class="nav-list-link">Syllabus</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Schedule category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/schedule.html" class="nav-list-link">Schedule</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 1 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/1.html" class="nav-list-link">Week 1</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/first_week.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/installing_python.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/intro_to_class.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 2 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/2.html" class="nav-list-link">Week 2</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/variables.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/control_flow.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/labs/mlk.html" class="nav-list-link">Lab</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 3 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/3.html" class="nav-list-link">Week 3</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/version_control.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/git_and_gitlab.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/choose_your_own_adventure.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 4 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/4.html" class="nav-list-link">Week 4</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/loops.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/homework/hw1_google.html" class="nav-list-link">Homework</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 5 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/5.html" class="nav-list-link">Week 5</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/drawing.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 6 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/6.html" class="nav-list-link">Week 6</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/lists_and_randomness.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 7 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/7.html" class="nav-list-link">Week 7</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/functions.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Spring Break category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/springbreak.html" class="nav-list-link">Spring Break</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/springbreak.html" class="nav-list-link">Readings</a> </li><li class="nav-list-item "> <a href="/labs/springbreak.html" class="nav-list-link">Lab</a> </li><li class="nav-list-item "> <a href="/studios/springbreak.html" class="nav-list-link">Studio</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 8 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/8.html" class="nav-list-link">Week 8</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/dictionaries.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 9 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/9.html" class="nav-list-link">Week 9</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/modules.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 10 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/10.html" class="nav-list-link">Week 10</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/revisiting_functions.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 11 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/11.html" class="nav-list-link">Week 11</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/reading_code.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Week 12 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/12.html" class="nav-list-link">Week 12</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/files.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Week 13 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/13.html" class="nav-list-link">Week 13</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/apis.html" class="nav-list-link">Readings</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Final Week category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/week/final.html" class="nav-list-link">Final Week</a><ul class="nav-list"><li class="nav-list-item "> <a href="/readings/final.html" class="nav-list-link">Readings</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Reference category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/reference.html" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/reference/turning_in_work.html" class="nav-list-link">Turning in work</a></li><li class="nav-list-item "><a href="/reference/screenshots.html" class="nav-list-link">Taking screenshots</a></li><li class="nav-list-item "><a href="/reference/command_line.html" class="nav-list-link">Using command line</a></li><li class="nav-list-item "><a href="/reference/using_git.html" class="nav-list-link">Using Git</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MI 250" aria-label="Search MI 250" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/schedule.html">Schedule</a></li> <li class="breadcrumb-nav-list-item"><a href="/week/13.html">Week 13</a></li> <li class="breadcrumb-nav-list-item"><span>Lab</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1> Week 13 Lab: Requests Data Using APIs </h1> <p><b>Git Repository:</b> <a href="https://gitlab.msu.edu/mi-250/using-apis" target="_blank"><tt>https://gitlab.msu.edu/mi-250/using-apis </tt></a> </p> <!--<p><b>Zoom Link:</b> <a href="https://msu.zoom.us/j/96651450582?pwd=SVhqOTNOMzJERW5BSVVmaEhFeWd2QT09"><tt>https://msu.zoom.us/j/96651450582?pwd=SVhqOTNOMzJERW5BSVVmaEhFeWd2QT09</tt></a>--> <p>So far, we’ve been creating our own content to use in programs. We’ve been writing out stories and storing them as strings, or storing structure data in dictionaries, or putting text data in files and bringing it in to Python. For structured data, we’ve been writing it ourselves. But you may want to write a program that uses large amounts of structured data that already exists out in the world.</p> <p>A large number of people, organizations, and companies that have their own data make their data available for public use. The U.S. government, for example, makes large amounts of data about the weather and the census and all sorts of things freely available to anyone who wants to use it. Some companies do this as well: Google Maps has a whole lot of map and location data that people can use to build their own map-based programs (though Google charges money in exchange for their data).</p> <p>How do people access this data? One way is to use an API, short for “application program interface”. An API is a middle man that sits between the data and programs that use the data. People or organizations or companies create the API so that people who want to use their data have a way to access it via a programming language like Python. Today we’re going to practice accessing data that’s out there in the world by using Python to talk to APIs.</p> <h2 id="requests"> <a href="#requests" class="anchor-heading" aria-labelledby="requests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requests </h2> <h3 id="exercise-1-install-the-requests-library"> <a href="#exercise-1-install-the-requests-library" class="anchor-heading" aria-labelledby="exercise-1-install-the-requests-library"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 1: Install the requests library </h3> <p>We are going to begin by using a simple API that just gives us some current information. To do this, we need to install the <code class="language-plaintext highlighter-rouge">requests</code> library. Using the command line, run the command:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install requests
</code></pre></div></div> <p>(Note: if you are using VIsual Studio Code to run your code, you’ll need to install <code class="language-plaintext highlighter-rouge">requests</code> through the terminal in VS Code.)</p> <p><code class="language-plaintext highlighter-rouge">requests</code> is a library that makes it easy to access APIs that are available through the web with Python.</p> <h3 id="exercise-2-who-is-on-the-international-space-station"> <a href="#exercise-2-who-is-on-the-international-space-station" class="anchor-heading" aria-labelledby="exercise-2-who-is-on-the-international-space-station"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 2: Who is on the International Space Station? </h3> <p>There is an API available on http://api.open-notify.org/ that provides a lot of interesting information from NASA, including things like the current position of the International Space Station (the ISS). We’re going to use it today to find out which astronauts are currently on the ISS.</p> <p>To get that, we will use the <code class="language-plaintext highlighter-rouge">astros.json</code> endpoint. This endpoint will return a JSON file with the astronauts’ names. Endpoints for this API are URLs that contain the data. If you use the full URL (http://api.open-notify.org/astros.json) in a browser, it will show you the information in JSON format.</p> <p>Use the requests library to retrieve the list of current astronauts on the International Space Station and print out what the API returns.</p> <p>Start by looking at the file <code class="language-plaintext highlighter-rouge">iss.py</code> in the lab repository. First, make sure to include <code class="language-plaintext highlighter-rouge">import requests</code> at the top of your program so you can use the requests functions.</p> <p>Next, let’s query the API. To do this, you can use the <code class="language-plaintext highlighter-rouge">requests.get()</code> function. The URL for the endpoint you want to query is the parameter for the function. If we want to get a list of astronauts, then we will want to use the <code class="language-plaintext highlighter-rouge">astros.json</code> endpoint. Let’s save the results of the query to a variable called <code class="language-plaintext highlighter-rouge">people</code>, like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>people = requests.get(astronauts)
</code></pre></div></div> <p>If you use <code class="language-plaintext highlighter-rouge">print</code> on the <code class="language-plaintext highlighter-rouge">people</code> variable, what happens? Nothing useful, because <code class="language-plaintext highlighter-rouge">people</code> is a complex object that can’t be easily printed. We can access the text of the JSON object by using <code class="language-plaintext highlighter-rouge">.text</code> on the variable, like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>people.text
</code></pre></div></div> <p>Print out the JSON text showing the astronaut information.</p> <p><em>Hint:</em> The <a href="https://www.dataquest.io/blog/python-api-tutorial/" target="_blank">Python API tutorial</a> from this week’s readings might be useful to refer to for this exercise, and also for the next 2 exercises.</p> <h3 id="exercise-3-convert-the-json-response-to-python"> <a href="#exercise-3-convert-the-json-response-to-python" class="anchor-heading" aria-labelledby="exercise-3-convert-the-json-response-to-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 3: Convert the JSON response to Python </h3> <p>You will notice that the response, which is in JSON, is actually quite complex. JSON is a format using specifically for storing complex data structures. Fortunately, Python makes it pretty easy to convert JSON to Python data structures, like dictionaries and lists. This allows us to use Python to do stuff with the data, like loop through it.</p> <p>We can use the <code class="language-plaintext highlighter-rouge">json</code> library and use the <code class="language-plaintext highlighter-rouge">json.loads()</code> function to convert from JSON to Python:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import json

info = json.loads(people.text)
</code></pre></div></div> <p>Once you have loaded the JSON text into a Python dictionary, use <code class="language-plaintext highlighter-rouge">pprint()</code> (from the <code class="language-plaintext highlighter-rouge">pprint</code> library) to pretty print out the whole dictionary. When working with APIs, I have found that using <code class="language-plaintext highlighter-rouge">pprint()</code> to pretty print the resulting dictionary is important for helping me to see the structure of the data that I get from the API.</p> <p><em>Hint</em>: You will probably need to <code class="language-plaintext highlighter-rouge">from pprint import pprint</code> for this exercise.</p> <h3 id="exercise-4-number-of-people-in-space"> <a href="#exercise-4-number-of-people-in-space" class="anchor-heading" aria-labelledby="exercise-4-number-of-people-in-space"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 4: Number of people in space </h3> <p>Now we have a variable called <code class="language-plaintext highlighter-rouge">info</code> that is a dictionary with astronaut data in it. Let’s look at the structure of the data the API is giving us. It’s a dictionary with 3 keys: <code class="language-plaintext highlighter-rouge">message</code>, <code class="language-plaintext highlighter-rouge">number</code>, and <code class="language-plaintext highlighter-rouge">people</code>. The <code class="language-plaintext highlighter-rouge">people</code> key contains a list of dictionaries, and each dictionary in that list has two keys: <code class="language-plaintext highlighter-rouge">craft</code> and <code class="language-plaintext highlighter-rouge">name</code>.</p> <p>The key <code class="language-plaintext highlighter-rouge">number</code> in this structure has a value that is an integer. If you look at the output when you pretty printing <code class="language-plaintext highlighter-rouge">info</code>, you’ll notice that this number matches the number of astronauts.</p> <p>Let’s pull that number from the data and print out the number of astronauts in a human readable format, like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of people in space: 3
</code></pre></div></div> <p>Remember you can get the value associated with a key in a dictionary with this format:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dict['key']
</code></pre></div></div> <p><em>Note</em>: The people currently in space frequently changes as people launch and land. You might not get the same number that I did when I wrote this. That’s one of the coolest parts of APIs; they can be current and up-to-date.</p> <p><em>Hint:</em> The <a href="/labs/dictionaries_as_data_structures.html">Dictionaries as Data Structures</a> lab might be useful to refer to for a refresher on how to access data from complex structures like dictionaries.</p> <h3 id="exercise-5-astronauts-names"> <a href="#exercise-5-astronauts-names" class="anchor-heading" aria-labelledby="exercise-5-astronauts-names"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 5: Astronaut’s names </h3> <p>The number of astronauts is only one level deep in the <code class="language-plaintext highlighter-rouge">info</code> dictionary, so it was pretty easy to get. How would we print out the names of the astronauts? To do this, you need to go three levels deep. For example, if we wanted to print out the name of the first astronaut that’s listed, we’d need to target the key <code class="language-plaintext highlighter-rouge">people</code>, then the first dictionary in the list of people, and then the key <code class="language-plaintext highlighter-rouge">name</code> for that dictionary. The code would look like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>info['people'][0]['name']
</code></pre></div></div> <p>When you use <code class="language-plaintext highlighter-rouge">print()</code> on that line of code, it should print out the name of one astronaut.</p> <p>For this exercise, we want to print out the names of all of the astronauts, not just the first one. Remember you can go through a list using a <code class="language-plaintext highlighter-rouge">for</code> loop. The list you want to loop through is <code class="language-plaintext highlighter-rouge">info['people']</code>. Remember you also want to target the <code class="language-plaintext highlighter-rouge">name</code> key once you get into a dictionary inside the list.</p> <p>When you’re done, what your program prints out should look like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of people in space: 3
Andrew Morgan
Oleg Skripochka
Jessica Meir
</code></pre></div></div> <p><em>Hint:</em> If you set up a <code class="language-plaintext highlighter-rouge">for</code> loop to go through the list <code class="language-plaintext highlighter-rouge">info['people']</code> like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for person in info['people']:
</code></pre></div></div> <p>then <code class="language-plaintext highlighter-rouge">person</code> represents each item in the list. In this for loop, <code class="language-plaintext highlighter-rouge">person</code> represents a dictionary, and you can use dictionary syntax (<code class="language-plaintext highlighter-rouge">dict['key']</code>) to target the key called <code class="language-plaintext highlighter-rouge">name</code>.</p> <h2 id="api-requests-with-parameters"> <a href="#api-requests-with-parameters" class="anchor-heading" aria-labelledby="api-requests-with-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API Requests with Parameters </h2> <p>Requests can be more specific than just asking for a URL. You can add parameters to a request by putting the parameters in a dictionary and then passing the dictionary to the <code class="language-plaintext highlighter-rouge">requests.get()</code> function as a parameter.</p> <h3 id="exercise-6-find-words-that-rhyme-with-your-name"> <a href="#exercise-6-find-words-that-rhyme-with-your-name" class="anchor-heading" aria-labelledby="exercise-6-find-words-that-rhyme-with-your-name"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 6: Find words that rhyme with your name </h3> <p><a href="https://www.datamuse.com/api/">Datamuse</a> has a nice, easy to use API that will give you words that are related to other words in various ways. One thing you can do with this API is request words that <em>rhyme</em> (sound like) a word that you provide. To do that, you pass a parameter called <code class="language-plaintext highlighter-rouge">rel_rhy</code> (for “related” to by “rhyme”) to the datamuse words API and set that paramter equal to the word you want to rhyme.</p> <p>You can add parameters to a <code class="language-plaintext highlighter-rouge">requests.get()</code> call by putting them into a dictionary and then passing that dictionary as a second parameter:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameter = {"rel_rhy": "stuff"}
rhyming = requests.get(datamuse, parameter)
</code></pre></div></div> <p>The file <code class="language-plaintext highlighter-rouge">rhyme.py</code> in the lab has the Datamuse API endpoint. Create a dictionary with one item in it – <code class="language-plaintext highlighter-rouge">rel_rhy</code> as the key, and your last name as the value. Then call the API, and print out what it returns. Printing out the raw JSON is fine; don’t convert it to Python or parse it yet.</p> <p><em>Hint</em>: You’ll need to remember to <code class="language-plaintext highlighter-rouge">import requests</code> to use the requests library.</p> <p><em>Hint 2</em>: Remember, to get the JSON data out of the result of the API call, you need to use <code class="language-plaintext highlighter-rouge">.text</code> like you did in the previous exercises.</p> <h3 id="exercise-7-pretty-print-the-json-response"> <a href="#exercise-7-pretty-print-the-json-response" class="anchor-heading" aria-labelledby="exercise-7-pretty-print-the-json-response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 7: Pretty print the JSON response </h3> <p>The raw JSON that is returned by DataMuse is complicated and hard to read. This is unfortunately pretty normal for APIs – they give you a LOT of information, and you need to pick through it to get what you want out.</p> <p>The first step is understanding what they give you back. For this exercise, your goal is to pretty print the results from the previous exercise. You will need to first convert the results from JSON to a Python dictionary using <code class="language-plaintext highlighter-rouge">json.loads()</code>, just like in Exercise 3. Then use the <code class="language-plaintext highlighter-rouge">pprint()</code> function to print it out in a readable form.</p> <p>What does the structure of this look like? Look for where there are list structures (look for square brackets, <code class="language-plaintext highlighter-rouge">[]</code>) and dictionary structures (look for curly braces, <code class="language-plaintext highlighter-rouge">{}</code>). Look at how the different structures are nested within one another by looking for where a bracket or brace begins and ends, and what’s inside of it. Understanding how data is structured can help you figure out how to get what you need from the data.</p> <p>Also look at how the data is organized. In this case, the words are in descending order based on a “score” - the score indicates how closely each word rhymes with the word you gave it.</p> <p><em>Hint</em>: You will need to <code class="language-plaintext highlighter-rouge">import json</code> and <code class="language-plaintext highlighter-rouge">from pprint import pprint</code> for this exercise.</p> <h3 id="exercise-8-print-out-the-rhymes"> <a href="#exercise-8-print-out-the-rhymes" class="anchor-heading" aria-labelledby="exercise-8-print-out-the-rhymes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 8: Print out the rhymes </h3> <p>The API returns the a complicated JSON object. You already converted the JSON to a Python data structure using <code class="language-plaintext highlighter-rouge">json.loads()</code> in the last exercise. Now then print out all of the words that rhyme with your last name. Only print out the words: no brackets or scores or anything else in the dictionary.</p> <p>For example, if I want to rhyme the word ‘time’, I could run the program and get:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>paradigm
sublime
rhyme
prime
crime
...
</code></pre></div></div> <p>Try it with different words. Notice the list is longer for some words than it is for others.</p> <p><em>Hint:</em> You should only need 1 <code class="language-plaintext highlighter-rouge">for</code> loop for this.</p> <h3 id="exercise-9-accept-user-input"> <a href="#exercise-9-accept-user-input" class="anchor-heading" aria-labelledby="exercise-9-accept-user-input"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 9: Accept user input </h3> <p>Let’s make this rhyme finding program more user-friendly.</p> <p>Modify the program to accept user input. Ask the user what word they want to find a rhyme for, and then pass that word into the API. You can do this the same way you have all semester by using the Python <code class="language-plaintext highlighter-rouge">input()</code> command.</p> <p>Add some text above the rhyming words so the user knows which word the list of rhymes is for, like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>These words rhyme with "time":
paradigm
sublime
rhyme
prime
crime
...
</code></pre></div></div> <p><em>Hint</em>: You will need to modify the dictionary you pass to the api to include the word input by the user.</p> <h3 id="exercise-10-print-only-the-top-10-rhymes"> <a href="#exercise-10-print-only-the-top-10-rhymes" class="anchor-heading" aria-labelledby="exercise-10-print-only-the-top-10-rhymes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 10: Print only the top 10 rhymes </h3> <p>The list it gives you sure can be long. Modify your program so it only prints the top 10 words by score.</p> <p><em>Hint:</em> The words are already organized in order by score, so you probably don’t have to do any extra work to make sure the order is correct.</p> <p><em>Hint 2:</em> Remember you can use a counter and increment it to keep track of how many times the loop has run, and then break out of the loop when the counter reaches a certain number. But there are other ways to do this.</p> <!-- ### Exercise increment exercise : Spelling corrector [Datamuse](https://www.datamuse.com/api/) can do things other than rhyming. One of the things that it can do is make suggestions for correcting your spelling. To do this, instead of passing in the `rel_rhy` parameter, you pass in an `sp` parameter. Write a new `spelling.py` program that asks a user for a (possibly misspelled) word, sends that word to the Datamuse API, and reports back any possible corrected spellings. You might want to start with your code from `rhyme.py`, and "Save as" spelling.py. ### Exercise increment exercise : Only print out good results If you look at the JSON that the spelling API returns, it gives a list of words, and a "score" for each word. The score is how well the word matches, with higher scored being more likely. Modify your spelling program to have a cutoff (that you, as the programmer, decide), and then only print out words that have a score that is above the cutoff -- that is, only print out words that are highly likely to be the word the user was thinking. --> <h2 id="apis-with-authentication"> <a href="#apis-with-authentication" class="anchor-heading" aria-labelledby="apis-with-authentication"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> APIs with authentication </h2> <p>Both the Astronauts API and the Datamuse API can be used by anyone, without needing an account. Most APIs are not that open, though. Most APIs require you to have an account and to authenticate (prove who you are) before you are allowed to make queries. Some also require you to pay to be able to access data through the API. We’re only using free APIs for this class.</p> <p>Authentication is more complicated for APIs than it is on normal websites; they don’t just use a username and password. Instead, they use more complicated setups like OAuth or APIKey to do the authentication. Authenticating requires that you have a special key that you then put into your code so that every time your program makes a request, it’s logged under your username.</p> <p>For today’s lab, we are going to access the free API at The Movie Database (TMDB). TMDB uses an access key for access. You have to create an account on TMDB’s website, and ask it to generate an access key for you.</p> <h3 id="exercise-11-sign-up-for-tmdb-create-a-new-app-and-retrieve-the-access-key"> <a href="#exercise-11-sign-up-for-tmdb-create-a-new-app-and-retrieve-the-access-key" class="anchor-heading" aria-labelledby="exercise-11-sign-up-for-tmdb-create-a-new-app-and-retrieve-the-access-key"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 11: Sign up for TMDB, Create a new app, and retrieve the access key. </h3> <p>In order to be able to access TMDB’s API, you need to have a TMDB account. If you do not already have a TMDB account, go to <a href="https://www.themoviedb.org/signup">https://www.themoviedb.org/signup</a> and sign up for an account now. You will need to verify your email address before you can move forward. Only one member of your pair needs to do this (you can both do it if you want, but you’ll only need one key).</p> <p>To access all of the TMDB developer features, use their developer portal: <a href="https://developers.themoviedb.org/3/getting-started/introduction">https://developers.themoviedb.org/3/getting-started/introduction</a>.</p> <p>Once you have signed in to TMDB, you will see a profile icon next to the search icon in the upper right hand corner. Click on that profile icon and it will bring up a menu. Choose “Settings”. On the settings page, there is an option on the left called “API”. Click that. You will see a list of all “Apps” that you have created. For an API, an App is a program that you are writing that needs permission to access the API. As a developer, you can create more than one app (if you want). Most likely, you have no apps there right now. Click on “Create” to create a new “App” for the program we are writing, and then choose “Developer” option.</p> <p>Accept the terms of service, and then TMDB will then present you with a form about that app that asks you for a lot of information. Fill it the form – give your app a name, provide a description, etc. You can use this website (<a href="http://mi250.dev">http://mi250.dev</a>) for the required website. Make it a personal app.</p> <p>Once you create the app, you will be taken to the App page that shows the information you just submitted. On that page you should see the API key and the access token. These keys identify which app you are using, so TMDB (the company) can tell which program’s API access is being used. Copy and paste the API key into the appropriate place at the top of <code class="language-plaintext highlighter-rouge">movies.py</code>.</p> <p>Once you’ve done this, you have everything ready to start access TMDB’s API.</p> <p>Let’s test it. Run the program “movies.py” with your API key. If you get an API key error, then it didn’t work. If you get a bunch of information about a movie, then it worked!</p> <p>Congrats! You now can access TMDB with a program!</p> <h3 id="exercise-12-pull-out-important-movie-information"> <a href="#exercise-12-pull-out-important-movie-information" class="anchor-heading" aria-labelledby="exercise-12-pull-out-important-movie-information"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 12: Pull out important movie information </h3> <p>When you run “movies.py”, the TMDB API returns a data structure – a complicated dictionary that contains lots of information about the movie. Right now, all the program does is print out the whole dictionary. While this has some useful information, it also prints out a ton of information that isn’t needed.</p> <p>Let’s improve our movie information program by only having it print out the important information. Modify “movies.py” to only print out the title, tagline, and overview (in that order):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Spider-Man: Across the Spider-Verse
It's how you wear the mask that matters.
--------------
After reuniting with Gwen Stacy, Brooklyn’s full-time, friendly neighborhood Spider-Man is catapulted across the Multiverse, where he encounters the Spider Society, a team of Spider-People charged with protecting the Multiverse’s very existence. But when the heroes clash on how to handle a new threat, Miles finds himself pitted against the other Spiders and must set out on his own to save those he loves most.
</code></pre></div></div> <h3 id="exercise-13-print-out-the-genres-also"> <a href="#exercise-13-print-out-the-genres-also" class="anchor-heading" aria-labelledby="exercise-13-print-out-the-genres-also"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 13: Print out the genres also </h3> <p>Now modify your movie program to also print out the movie’s genres. Notice that a movie can be in more than one genre, and that TMDB gives you the genre in a list. You’ll have to use a <code class="language-plaintext highlighter-rouge">for</code> loop to loop through that list and print out the name of each genre:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Spider-Man: Across the Spider-Verse
It's how you wear the mask that matters.
--------------
After reuniting with Gwen Stacy, Brooklyn’s full-time, friendly neighborhood Spider-Man is catapulted across the Multiverse, where he encounters the Spider Society, a team of Spider-People charged with protecting the Multiverse’s very existence. But when the heroes clash on how to handle a new threat, Miles finds himself pitted against the other Spiders and must set out on his own to save those he loves most.

Genres:
- Animation
- Action
- Adventure
- Science Fiction
</code></pre></div></div> <h3 id="exercise-14-print-out-the-stars-also"> <a href="#exercise-14-print-out-the-stars-also" class="anchor-heading" aria-labelledby="exercise-14-print-out-the-stars-also"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 14: Print out the stars also </h3> <p>Next, we are going to modify out movie program to get the list of people who starred in the movie and print out their names.</p> <p>Notice that the data we get back from TMDB doesn’t actually include the names of any of the actors (the ‘cast’) in the movie. Instead, we are going to need to make a <em>second</em> request of the API. Copy and paste the code that makes the API request and change the URL to instead use the <code class="language-plaintext highlighter-rouge">movie_credits</code> URL. Look closely at that URL; it is the word <code class="language-plaintext highlighter-rouge">movie</code> followed by the ID number of the movie (569094) we want, followed by the word <code class="language-plaintext highlighter-rouge">credits</code>.</p> <p>This should give you a second set of results. It has two entries: <code class="language-plaintext highlighter-rouge">cast</code> is a list of actors in the movie and <code class="language-plaintext highlighter-rouge">crew</code> is a list of the production crew of the movie. We only want to print out the cast for this exercise.</p> <p>Beneath the rest of the movie info, print the names of the cast members (at least the first 5 or 10):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Spider-Man: Across the Spider-Verse
It's how you wear the mask that matters.
--------------
After reuniting with Gwen Stacy, Brooklyn’s full-time, friendly neighborhood Spider-Man is catapulted across the Multiverse, where he encounters the Spider Society, a team of Spider-People charged with protecting the Multiverse’s very existence. But when the heroes clash on how to handle a new threat, Miles finds himself pitted against the other Spiders and must set out on his own to save those he loves most.

Genres:
- Animation
- Action
- Adventure
- Science Fiction

Cast:
- Shameik Moore
- Hailee Steinfeld
- Jason Schwartzman
- Oscar Isaac
- Brian Tyree Henry
...
</code></pre></div></div> <p><em>Hint</em>: You will probably need to change the printing code back to just pretty print the dictionary returned by the credits API so you can see what it looks like.</p> <p><em>Hint 2</em>: The credits request returns a LOT of information. So much that PowerShell or Terminal might not be able to display it all; when you scroll back you might not get all the way back to the beginning. To deal with this, you can limit how <em>deep</em> into the data structure you pretty print. <code class="language-plaintext highlighter-rouge">pprint(info, depth=1)</code> only prints the top level dictionary. <code class="language-plaintext highlighter-rouge">pprint(info, depth=2)</code> prints the top level and one level underneath it. That can help you see parts of the dictionary when the data structure is REALLY big. Note also that PowerShell or Terminal will print more than the terminal inside VS Code will.</p> <h3 id="exercise-15-change-to-a-different-movie"> <a href="#exercise-15-change-to-a-different-movie" class="anchor-heading" aria-labelledby="exercise-15-change-to-a-different-movie"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 15: Change to a Different Movie </h3> <p>Let’s change our program to request information about a different movie. Hopefully this should be pretty easy. Let’s get information about the movie with TMDB ID number 438631.</p> <p>What movie is that?</p> <h3 id="exercise-16-searching-the-database"> <a href="#exercise-16-searching-the-database" class="anchor-heading" aria-labelledby="exercise-16-searching-the-database"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercise 16: Searching the Database </h3> <p>For all of the previous exercises, you need to know the exact movie ID number in order to get information about a movie. That isn’t all that helpful if you don’t already know the ID numbers. So instead, we can search the database by name.</p> <p>To do that, we need to use the API slightly different. We need to specify a <em>search query</em>. We do that as a parameter to the API call. We are already passing one parameter – our <code class="language-plaintext highlighter-rouge">api_key</code>. We need to add a second parameter called <code class="language-plaintext highlighter-rouge">query</code> by adding it as an additional item in the parameter dictionary. We can then use it to search for a movie by name.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameter = {"api_key": api_key, "query": "Spider-Man"}
result_json = requests.get(movie_search, parameter)
</code></pre></div></div> <p>For this exercise, create a new program – call it <code class="language-plaintext highlighter-rouge">search.py</code>. Make your program to search TMDB for movies with the word “Spider-Man” in the title. You can and should copy code from your <code class="language-plaintext highlighter-rouge">movies.py</code> program as needed.</p> <p><em>Hint</em>: You will probably need to change the printing code back to just pretty print the resulting dictionary so you can see what it looks like, since the search results dictionary looks different than the movie dictionary or the credits dictionary.</p> <h2 id="challenges"> <a href="#challenges" class="anchor-heading" aria-labelledby="challenges"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenges </h2> <h3 id="challenge-1-print-information-about-the-top-search-result"> <a href="#challenge-1-print-information-about-the-top-search-result" class="anchor-heading" aria-labelledby="challenge-1-print-information-about-the-top-search-result"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge 1: Print Information About the Top Search Result </h3> <p>When you search for a movie by name using the search API, most likely the first result is the movie you were looking for. Let’s assume that it is.</p> <p>Combine the results of your last two programs / exercises. Search for the movie “Harry Potter”. The first movie in the list of results is probably the first Harry Potter movie. In the dictionary that you get back from the API, you should be able to find the ID number of that movie. Then fill that ID number in to the URLs to get the movie name, tagline, and overview, and also into the URL to get the cast. Print out all of that information in a human-readable form like you did in exercise 11.</p> <p>This program in total should make 3 API queries in total: search, movie, and credits.</p> <h3 id="challenge-2-movie-search-program-aka-user-input"> <a href="#challenge-2-movie-search-program-aka-user-input" class="anchor-heading" aria-labelledby="challenge-2-movie-search-program-aka-user-input"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge 2: Movie Search Program (aka user input) </h3> <p>Take the program you wrote for challenge 1, and modify it to accept the search query as an input. That is, your program should ask the user what movie they want to know about. It will then search TMDB for that movie. It will assume that the first result is the movie the user is looking for, and remember the ID number for that movie. Then it will use the API to get inforamtion about the movie such as its full name, tagline, overview, and list of stars, and print out all of that information.</p> <p>This is creating a movie search tool. You type in the name of a movie, and is prints out a bunch of information about that movie.</p> <h3 id="challenge-3-better-movie-search-program"> <a href="#challenge-3-better-movie-search-program" class="anchor-heading" aria-labelledby="challenge-3-better-movie-search-program"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Challenge 3: Better Movie Search Program </h3> <p>This builds on Challenge 2. Modify your program so that it prints out the movie titles for the top (5? 10? 20?) results of the search and allow the user to choose the movie they want. Then print out ,more information about the movie they choose.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
